(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-gechi-gechi"],{"05b9":function(t,e,i){var n=i("b4dc");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var c=i("4f06").default;c("0f0d2d85",n,!0,{sourceMap:!1,shadowMode:!1})},"0a7f":function(t,e,i){"use strict";i.r(e);var n=i("d757"),c=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=c.a},"1a38":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".audio-control-switch[data-v-6baae4f8]{font-size:%?40?%;width:%?80?%;height:%?80?%}.content[data-v-6baae4f8]{display:flex;flex-direction:column;align-items:center;color:#fff;background:linear-gradient(#88d3f3,#777ece,#88d3f3)}.content-top[data-v-6baae4f8]{padding:%?20?%;text-align:center;height:%?160?%}.content-bottom[data-v-6baae4f8]{width:100%;text-align:right;padding:10px}.content-top-title[data-v-6baae4f8]{font-size:%?50?%;margin-top:10px}.content-top-author[data-v-6baae4f8]{font-size:%?32?%;margin-top:%?10?%}",""]),t.exports=e},"512a":function(t,e,i){"use strict";i.r(e);var n=i("d886"),c=i("cad2");for(var r in c)"default"!==r&&function(t){i.d(e,t,(function(){return c[t]}))}(r);i("5602");var s,a=i("f0c5"),o=Object(a["a"])(c["default"],n["b"],n["c"],!1,null,"413d7947",null,!1,n["a"],s);e["default"]=o.exports},5602:function(t,e,i){"use strict";var n=i("05b9"),c=i.n(n);c.a},"71b8":function(t,e,i){"use strict";i.r(e);var n=i("a252"),c=i("0a7f");for(var r in c)"default"!==r&&function(t){i.d(e,t,(function(){return c[t]}))}(r);i("8f98");var s,a=i("f0c5"),o=Object(a["a"])(c["default"],n["b"],n["c"],!1,null,"6baae4f8",null,!1,n["a"],s);e["default"]=o.exports},"8f98":function(t,e,i){"use strict";var n=i("d9d8"),c=i.n(n);c.a},"9fa7":function(t,e,i){"use strict";i("c975"),i("26e9"),i("a434"),i("a9e3"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("498a"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{font2line4height:2.5,selectAllStatus:!1,selects:{},scrollStatus:!1,touchIndex:0,curLyricId:"lrc-0",showLyricId:"lrc-0",curLyricIndex:0,selectStatus:!1,touchStatus:!1,showCenterView:!1,spaceLineNum:0,timeout:{centerViewHide:null,goCenter:null},cuSelectControlStyle:{height:"40px",backgroundColor:"grey",itemFontSize:"16px",itemBorderRadius:"99px",itemBackgroundColor:"#00ffff"},cuLyricStyle:{color:"#fff",activeColor:"#fff",fontSize:"18px",activeFontSize:"16px",lineHeight:"40px",activeLineHeight:"40px",selectedBGColor:"inherit"},cuAreaStyle:{width:"100vw",height:"70vh"},cuCenterStyle:{btnImg:"",btnText:"btn",color:"#f4f4f5",lineHeight:"1px",height:"16px",fontSize:"14px"},scrollView:{height:"100%",top:0},screen:{width:0,height:0,px2rpxscale:1}}},beforeMount:function(){var t=uni.getSystemInfoSync();if(this.screen.width=t.windowWidth,this.screen.height=t.windowHeight,this.screen.px2rpxscale=750/t.windowWidth,this.cuAreaStyle=Object.assign(this.cuAreaStyle,this.areaStyle),this.cuLyricStyle=Object.assign(this.cuLyricStyle,this.lyricStyle),this.cuCenterStyle=Object.assign(this.cuCenterStyle,this.centerStyle),this.cuSelectControlStyle=Object.assign(this.cuSelectControlStyle,this.selectControlStyle),this.lyricStyle){if("activeFontSize"in this.lyricStyle||(this.cuLyricStyle["activeFontSize"]=this.cuLyricStyle["fontSize"]),!("lineHeight"in this.lyricStyle)){var e=this.sizeDeal(this.cuLyricStyle["fontSize"]);this.cuLyricStyle["lineHeight"]=e[0]*this.font2line4height+e[1]}if(!("activeLineHeight"in this.lyricStyle)){var i=this.sizeDeal(this.cuLyricStyle["activeFontSize"]);this.cuLyricStyle["activeLineHeight"]=i[0]*this.font2line4height+i[1]}}if(this.centerStyle&&!("height"in this.centerStyle)){var n=this.sizeDeal(this.cuCenterStyle["fontSize"]);this.cuCenterStyle["height"]=1.2*n[0]+n[1]}},mounted:function(){var t=this;this.$nextTick((function(){var e=uni.createSelectorQuery().in(t);e.select(".lyric-main").boundingClientRect((function(e){t.cuAreaStyle.height=e.height-150+"px";var i=t.sizeDeal(t.cuLyricStyle.lineHeight),n=t.sizeDeal(t.cuLyricStyle.activeLineHeight),c=Math.floor((e.height-n[0])/i[0]);c%2!==0&&(c-=1),t.spaceLineNum=Math.floor(c/2),t.scrollView.height=t.cuAreaStyle.height,t.scrollView.top=(e.height-(c*i[0]+n[0]))/2+"px"})).exec()}))},props:{selectControlStyle:{default:function(){},type:Object},centerStyle:{default:function(){},type:Object},lyrics:{default:function(){return[]},type:Array},curTime:{default:0,type:[Number,String]},lyricStyle:{default:function(){},type:Object},areaStyle:{default:function(){},type:Object}},watch:{curTime:function(t){var e=this.getIndex(t,this.mLyrics.times);this.curLyricIndex=e+this.spaceLineNum,this.curLyricId="lrc-"+e,this.touchStatus||this.selectStatus||(this.showLyricId=this.curLyricId)}},computed:{lineHeightNum:function(){var t=this.sizeDeal(this.cuLyricStyle.fontSize);return t[0]*this.font2line4height},centerTime:function(){var t=this.touchIndex-this.spaceLineNum,e=this.mLyrics.times[t];return this.timeFormat(e)},centerLineTop:function(){var t=this.sizeDeal(this.cuAreaStyle.height);return t=t[0]/2-this.sizeDeal(this.cuCenterStyle.height)[0]/2+t[1],t},lineHeight:function(){var t=this.sizeDeal(this.cuLyricStyle.fontSize);return 2*t[0]+t[1]},activeLineHeight:function(){var t=this.sizeDeal(this.cuLyricStyle.activeFontSize);return 2*t[0]+t[1]},mLyrics:function(){return this.lrcDeal(this.lyrics)}},methods:{selectAll:function(){var t=this;this.selectAllStatus=!this.selectAllStatus,this.$nextTick((function(){if(t.selectAllStatus)for(var e=0;e<t.mLyrics.lrcs.length;e++){var i=t.mLyrics.lrcs[e];i&&(t.selects[e]=i)}else t.selects={};t.$forceUpdate()}))},copyLyric:function(){var t={};for(var e in this.selects)t[this.mLyrics.times[e-this.spaceLineNum]]=this.selects[e];this.$emit("copyLyrics",{lyrics:t}),this.selectCancel()},selectCancel:function(){this.selectStatus=!1,this.touchStatus=!1,this.selectAllStatus=!1,this.selects={}},itemLongpress:function(t,e){this.scrollStatus||this.selectStatus||(this.selects={},this.selectModel(),t&&(this.selects[e]?delete this.selects[e]:this.selects[e]=t),this.$forceUpdate())},select:function(t,e){this.selects[e]?delete this.selects[e]:this.selects[e]=t,this.$forceUpdate()},selectModel:function(){this.showCenterView=!1,this.touchStatus=!1,this.selectStatus=!0},centerBtnClick:function(){var t=this.mLyrics.lrcs[this.touchIndex],e=Number(this.mLyrics.times[this.touchIndex-this.spaceLineNum]);this.$emit("centerBtnClick",{centerTime:e,centerLyric:t})},textTouchstart:function(){clearTimeout(this.timeout.goCenter),clearTimeout(this.timeout.centerViewHide),this.touchStatus=!0},textTouchEnd:function(){var t=this;this.touchStatus=2,this.scrollStatus=!1,this.selectStatus||(this.timeout.goCenter=setTimeout((function(){t.showLyricId="lrc-"+(t.touchIndex-t.spaceLineNum)}),500),this.timeout.centerViewHide=setTimeout(this.clearTouch,5e3))},clearTouch:function(){this.touchStatus=!1,this.showLyricId=this.curLyricId,this.showCenterView=!1},lyricScroll:function(t){var e=t.detail.scrollTop,i=Math.round(e/this.lineHeightNum);this.touchIndex=i+this.spaceLineNum,!0!==this.touchStatus||this.selectStatus||(this.scrollStatus=!0),!this.touchStatus||this.selectStatus||this.showCenterView||(this.showCenterView=!0),this.$forceUpdate()},getIndex:function(t,e){t=Number(t);var i=0;for(var n in e){var c=Number(e[n]);if(t==c)return i;if(t<c)return i-1;if(i==e.length-1)return e.length-1;i+=1}},timeFormat:function(t){if(t=Number(t),t>=0){var e=parseInt(t/3600),i=parseInt(t/60)-60*e,n=parseInt(t)-60*i;return 1==e.toString().length&&(e="0"+e),1==i.toString().length&&(i="0"+i),1==n.toString().length&&(n="0"+n),"00"!=e?e+":"+i+":"+n:i+":"+n}return""},sizeDeal:function(t){var e=Number.isNaN(parseFloat(t))?0:parseFloat(t),i=t.toString().replace(/[0-9\.]/g,"");return"rpx"==i?(e/=this.screen.px2rpxscale,i="px"):""==i?i="px":"vw"==i&&(i="px",e=e/100*750/this.screen.px2rpxscale),[e,i,e+i]},lrcDeal:function(t){var e={lrcs:[],times:[]};if(t.length<1)e.lrcs.push("暂无歌词");else for(var i=0;i<t.length;i++){var n=t[i].toString(),c=n.split("]");if(c.length>1){var r=c[0].replace("[",""),s=r.split(":");if(s.length>1){var a=s.reverse(),o=0;if(-1!=a[0].indexOf("."))for(var l=0;l<a.length;l++)o+=Number(a[l])*Math.pow(60,l);else for(var u=0;u<a.length;u++)o+=0==u?Number(a[u])/1e3:Number(a[u])*Math.pow(60,u-1);o=o.toFixed(2);var h=c.splice(1,1e3).join("]").trim();h.length>0&&(e.times.push(o),e.lrcs.push(h))}else{var d=c.splice(1,1e3).join("]").trim();d.length>0&&(e.times.push(Number(r).toFixed(2)),e.lrcs.push(d))}}else e.lrcs.push(n)}for(var f=0;f<this.spaceLineNum;f++)e.lrcs.push(""),e.lrcs.splice(0,0,"");return e}}};e.default=n},a252:function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={bingLyric:i("512a").default},c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"content-top"},[i("v-uni-view",{staticClass:"content-top-title"},[t._v(t._s(t.curdata.title))]),i("v-uni-view",{staticClass:"content-top-author"},[t._v(t._s(t.curdata.author))])],1),i("bing-lyric",{attrs:{lyrics:t.lyrics,centerStyle:t.centerStyle,curTime:t.curTime,areaStyle:t.cuAreaStyle,lyricStyle:t.lyricStyle},on:{centerBtnClick:function(e){arguments[0]=e=t.$handleEvent(e),t.centerBtnClick.apply(void 0,arguments)},copyLyrics:function(e){arguments[0]=e=t.$handleEvent(e),t.copy.apply(void 0,arguments)}}})],1)},r=[]},b4dc:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".lyric-main[data-v-413d7947]{position:relative}.lyric-show[data-v-413d7947]{position:absolute;overflow-anchor:none}.lyric-show[data-v-413d7947] ::-webkit-scrollbar{display:none;width:0!important;height:0!important;-webkit-appearance:none;background:transparent}.lyric-show uni-text[data-v-413d7947]{display:flex;flex-direction:row;align-items:center;justify-content:space-around;text-align:center;white-space:nowrap;height:32px;font-size:16px;overflow:auto}.center-view[data-v-413d7947]{position:absolute;display:flex;flex-direction:row;align-items:center;white-space:nowrap;width:100%;opacity:.6;overflow:visible;pointer-events:none}.center-btn[data-v-413d7947]{position:absolute;left:0;width:20%;text-align:left;padding:0 5px;color:#fff;pointer-events:all}.center-btn[data-v-413d7947]:active{opacity:.6}.center-line[data-v-413d7947]{position:absolute;left:20%;width:60%;height:1px;background-color:#fff;pointer-events:none}.center-time[data-v-413d7947]{position:absolute;right:0;width:20%;text-align:right;padding:0 5px;color:#fff}.check[data-v-413d7947]{position:absolute;float:left;padding:0 5px;opacity:.5}.selectControl[data-v-413d7947]{position:absolute;bottom:0;display:flex;flex-direction:row;align-items:center;justify-content:space-around;width:100%;background-color:grey}.selectControl uni-view[data-v-413d7947]:active{opacity:.8}.selectControl uni-view[data-v-413d7947]{margin:5px 0;padding:5px 2px;width:30%;overflow:hidden;white-space:nowrap;text-align:center;font-size:16px;border-radius:30px;background-color:grey}",""]),t.exports=e},cad2:function(t,e,i){"use strict";i.r(e);var n=i("9fa7"),c=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=c.a},d757:function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("ac1f"),i("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var c=n(i("1da1")),r=n(i("512a")),s=t.database(),a={components:{bingLyric:r.default},data:function(){return{title:"Hello",centerStyle:{btnImg:"../../static/btn.png"},lyricStyle:{},cuAreaStyle:{width:"100vw",height:"90vh"},resources_id:"",lyrics:[],curTime:0,curdata:{}}},created:function(t){this.makeTime(),this.resources_id=t.id},mounted:function(){this.getResource(),this.getgechi()},methods:{getgechi:function(){var t=this;return(0,c.default)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.resources_id){e.next=7;break}return e.next=3,s.collection("jz-custom-gechi").where({resources_id:t.resources_id||"619b278913207d00010a1216"}).get();case 3:i=e.sent,n={},i.result.data&&i.result.data.length>0&&(n=i.result.data[0]),t.lyrics=n.comment.split("\n");case 7:case"end":return e.stop()}}),e)})))()},getResource:function(){var e=this;this.resources_id&&t.callFunction({name:"jzfunction",data:{action:"resource/getResource",data:{_id:this.resources_id||"619b278913207d00010a1216"}}}).then((function(t){t=t.result;"0000"==t.state?e.curdata=t.rows[0]:console.log("res",t.msg)}))},copy:function(t){console.log("index",t),uni.showModal({content:JSON.stringify(t.lyrics)})},centerBtnClick:function(t){console.log(t),this.curTime=t.centerTime},makeTime:function(){var t=0;for(t;t<500;t++)setTimeout(this.out,500*t,.5)},out:function(t){this.curTime+=t}}};e.default=a}).call(this,i("a9ff")["default"])},d886:function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"lyric-main",style:{width:t.cuAreaStyle.width,height:t.cuAreaStyle.height,background:t.cuAreaStyle.background}},[i("v-uni-scroll-view",{staticClass:"lyric-show",style:{top:t.scrollView.top,width:t.cuAreaStyle.width,height:t.scrollView.height},attrs:{id:"lyric-show","scroll-with-animation":"true","scroll-y":!0,"scroll-into-view":t.showLyricId},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.lyricScroll.apply(void 0,arguments)}}},t._l(t.mLyrics.lrcs,(function(e,n){return i("v-uni-view",{key:n,staticClass:"lrc-item",on:{longpress:function(i){arguments[0]=i=t.$handleEvent(i),t.itemLongpress(e,n)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.textTouchstart.apply(void 0,arguments)},touchcancel:function(e){arguments[0]=e=t.$handleEvent(e),t.textTouchEnd.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.textTouchEnd.apply(void 0,arguments)},click:function(i){arguments[0]=i=t.$handleEvent(i),t.select(e,n)}}},[t.selectStatus&&t.selects[n]&&e?i("v-uni-text",{staticClass:"check",attrs:{value:"[v,i]"}},[t._v("✔")]):t._e(),i("v-uni-text",{staticClass:"lrc",style:{opacity:t.touchIndex==n&&t.touchStatus&&!t.selectStatus?.8:1,color:(t.curLyricIndex==n||t.touchIndex==n&&t.touchStatus)&&!t.selectStatus?t.cuLyricStyle.activeColor:t.cuLyricStyle.color,fontSize:(t.curLyricIndex==n||t.touchIndex==n&&t.touchStatus)&&!t.selectStatus?t.cuLyricStyle.activeFontSize:t.cuLyricStyle.fontSize,height:(t.curLyricIndex==n||t.touchIndex==n&&t.touchStatus)&&!t.selectStatus?t.cuLyricStyle.activeLineHeight:t.cuLyricStyle.lineHeight,backgroundColor:t.selectStatus&&t.selects[n]&&e?t.cuLyricStyle.selectBGColor:"inherit"},attrs:{id:"lrc-"+n}},[t._v(t._s(e))])],1)})),1),i("v-uni-view",{staticClass:"center-view",style:{top:t.centerLineTop,display:t.showCenterView?"flex":"none",fontSize:t.cuCenterStyle.fontSize,height:t.cuCenterStyle.height}},[t.cuCenterStyle.btnImg?i("v-uni-image",{staticClass:"center-btn",style:{width:t.cuCenterStyle.height,height:t.cuCenterStyle.height},attrs:{src:t.cuCenterStyle.btnImg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.centerBtnClick.apply(void 0,arguments)}}}):i("v-uni-view",{staticClass:"center-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.centerBtnClick.apply(void 0,arguments)}}},[t._v(t._s(t.cuCenterStyle.btnText))]),i("v-uni-view",{staticClass:"center-line",style:{height:t.cuCenterStyle.lineHeight,backgroundColor:t.cuCenterStyle.color}}),i("v-uni-view",{staticClass:"center-time"},[t._v(t._s(t.centerTime))])],1)],1)},r=[]},d9d8:function(t,e,i){var n=i("1a38");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var c=i("4f06").default;c("56b46189",n,!0,{sourceMap:!1,shadowMode:!1})}}]);