(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-login-page-index-index"],{"13d0":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uNavbar:n("e660").default,uImage:n("7a28").default,uButton:n("c7c3").default,uModal:n("d57c").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:" pwd-login"},[n("v-uni-view",{staticClass:"login-back"},[n("v-uni-view",{staticClass:"usercenter-top"},[n("u-navbar",{attrs:{"is-back":!0,title:"用户登录","border-bottom":!1,"title-color":"#fff","back-icon-color":"#fff",background:{background:"none"}}})],1),n("v-uni-view",{staticClass:"login_back_logo"},[n("u-image",{attrs:{width:"100%",src:"/static/login-index/login_back.png",mode:"widthFix"}})],1),n("v-uni-view",{staticClass:"login-back-con"},[n("v-uni-input",{staticClass:"input-box",attrs:{inputBorder:!1,placeholder:"请输入登录名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),n("v-uni-input",{staticClass:"input-box",attrs:{type:"password",inputBorder:!1,placeholder:t.$t("pwdLogin.passwordPlaceholder")},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t.captchaBase64?n("v-uni-view",{staticClass:"captcha-box"},[n("v-uni-image",{staticClass:"captcha-img",attrs:{src:t.captchaBase64,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createCaptcha.apply(void 0,arguments)}}}),n("v-uni-input",{staticClass:"input-box captcha",attrs:{type:"text",inputBorder:!1,placeholder:t.$t("pwdLogin.verifyCodePlaceholder")},model:{value:t.captcha,callback:function(e){t.captcha=e},expression:"captcha"}})],1):t._e(),n("v-uni-view",{staticClass:"auth-box"},[n("v-uni-text",{staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toRetrievePwd.apply(void 0,arguments)}}},[t._v(t._s(t.$t("pwdLogin.forgetPassword")))]),n("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.showRegister,expression:"showRegister"}],staticClass:"link",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toRegister.apply(void 0,arguments)}}},[t._v(t._s(t.registerText))])],1),n("u-button",{staticClass:"send-btn",attrs:{disabled:!t.canLogin,type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pwdLogin.apply(void 0,arguments)}}},[t._v(t._s(t.$t("pwdLogin.login")))])],1)],1),n("sevicecontent",{ref:"sevicecontent",on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmcontent.apply(void 0,arguments)}}}),n("u-modal",{model:{value:t.showfindpass,callback:function(e){t.showfindpass=e},expression:"showfindpass"}},[n("v-uni-view",{staticClass:"slot-content",staticStyle:{padding:"10px"}},[t._v(t._s(t.passcontent))])],1)],1)},o=[]},"4d4c":function(t,e,n){var a=n("cee6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("4b4013d4",a,!0,{sourceMap:!1,shadowMode:!1})},"6fd6":function(t,e,n){"use strict";var a=n("4d4c"),i=n.n(a);i.a},"89de":function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),o=a(n("698c")),c=a(n("1f70")),s={mixins:[o.default],components:{sevicecontent:c.default},data:function(){return{showfindpass:!1,password:"",username:"",agree:!0,captchaBase64:"",captcha:"",showRegister:!0,registerText:"注册账号"}},created:function(){var t=getApp().globalData.systemconfig;"1"==t["800026"]?this.showRegister=!1:(this.showRegister=!0,"2"==t["800026"]?this.registerText="邀请码注册":this.registerText="注册账号")},computed:{passcontent:function(){var t="",e=getApp().globalData.systemconfig;return e["800021"]&&(t=e["800021"]),t},canLogin:function(){return this.username.length&&this.isPwd},isPwd:function(){return/^.{6,20}$/.test(this.password)},isPhone:function(){return/^1\d{10}$/.test(this.phone)}},methods:{goback:function(){uni.navigateBack()},toRetrievePwd:function(){this.showfindpass=!0},confirmnc:function(){uni.navigateTo({url:"/pages/ucenter/login-page/pwd-login/pwd-weibo"})},confirmcontent:function(){var e=this;uni.showLoading({title:"正在处理..."}),t.callFunction({name:"uni-id-cf",data:{action:"login",params:{username:this.username,password:this.password,captcha:this.captcha}},success:function(t){var n=t.result;0===n.code?(uni.setStorageSync("userInfo",n.userInfo),e.checkisbdwb(n.userInfo.username).then((function(t){uni.hideLoading(),t?(uni.setStorageSync("istgzcsh_success",!0),e.loginSuccess(n)):e.confirmnc()}))):(uni.hideLoading(),n.needCaptcha?(uni.showToast({title:n.msg,icon:"none"}),e.createCaptcha()):uni.showModal({title:e.$t("common").error,content:n.msg,showCancel:!1,confirmText:e.$t("common").gotIt}))}})},pwdLogin:function(){var t=uni.getStorageSync("agree_service");t?this.confirmcontent():this.$refs.sevicecontent.show()},checkisbdwb:function(e){return new Promise(function(){var n=(0,i.default)(regeneratorRuntime.mark((function n(a){var i,o,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.database(),o=i.collection("uni-id-users"),n.next=4,o.where({username:e}).field("username,isbdwb,weiboname,weibocontent,nickname").get();case 4:c=n.sent,c.result.data&&c.result.data.length>0?(uni.hideLoading(),s=c.result.data[0],s.isbdwb?a(!0):s.weiboname&&s.weibocontent?uni.showModal({title:"提示",showCancel:!1,confirmText:"退出",content:"您已提交微博验证【"+s.weibocontent+"】申请，如已发微博，请等待管理员审核",success:function(t){if(t.confirm){var e=plus.webview.currentWebview().opener();mui.fire(e,"quit",{data:"quit"}),console.log("在这里退出App")}}}):a(!1)):a(!1),console.log("result",c);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},createCaptcha:function(){var e=this;t.callFunction({name:"uni-id-cf",data:{action:"createCaptcha",params:{scene:"login"}},success:function(t){var n=t.result;0===n.code?e.captchaBase64=n.captchaBase64:uni.showModal({content:n.msg,showCancel:!1})}})},toRegister:function(t){console.log(t),uni.navigateTo({url:"/pages/ucenter/login-page/register/register"})}}};e.default=s}).call(this,n("a9ff")["default"])},cee6:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"uni-view[data-v-29c91a66]{display:flex;box-sizing:border-box;flex-direction:column}\n.content[data-v-29c91a66]{padding:0 %?50?%;width:%?750?%;flex:1}.input-box[data-v-29c91a66]{padding:0 15px;margin-bottom:10px;background-color:#f8f8f8;border-radius:6px;font-size:%?28?%}.get-code[data-v-29c91a66]{margin:0;margin-top:15px;background-color:#7275d3;color:#fff}.input-box[data-v-29c91a66],\r\n.get-code[data-v-29c91a66]{height:45px;line-height:45px}.title[data-v-29c91a66]{text-align:center;padding-bottom:5px}.tip[data-v-29c91a66]{color:#666;font-size:%?26?%;margin:6px 0}.easyinput[data-v-29c91a66]{background-color:#f8f8f8;border-radius:%?6?%}.send-btn[data-v-29c91a66]{width:100%;margin-top:15px;border-radius:%?6?%}.link[data-v-29c91a66]{color:#04498c}.slot-content[data-v-29c91a66]{padding:10px}.usercenter-top[data-v-29c91a66]{color:#fff;font-size:16px;height:44px;line-height:44px}.usercenter-top-left[data-v-29c91a66]{position:absolute;left:4px;top:12px}.usercenter-top-mine[data-v-29c91a66]{text-align:center}.login-back[data-v-29c91a66]{height:100vh;background:linear-gradient(#777ece,rgb(255 255 255));background-size:cover;background-repeat:no-repeat;background-position:50%}\r\n/* .pwd-login{\r\n\tpadding-top: 10em;\r\n}\r\n.pwd-login .title{\r\n\tfont-size: 24px;\r\n\tmargin-bottom: 20px;\r\n} */.auth-box[data-v-29c91a66]{flex-direction:row;justify-content:space-between;margin-top:20px;text-align:right}.auth-box .link[data-v-29c91a66]{font-size:%?26?%}.login-text-sub[data-v-29c91a66]{color:#8a8f8b}.toRegister[data-v-29c91a66]{margin-top:80px;width:%?600?%}.captcha-box[data-v-29c91a66]{flex-direction:row;align-items:center;justify-content:flex-end}.captcha-img[data-v-29c91a66]{margin:15px 15px 0 0;width:%?250?%}.captcha[data-v-29c91a66]{width:%?350?%}.login-back-con[data-v-29c91a66]{width:80%;margin:0 auto;margin-top:40px\r\n\t/* margin: 290px auto 0px auto; */}.login-back-con .u-btn[data-v-29c91a66]{border-radius:50px}.login-back-con .input-box[data-v-29c91a66]{height:40px;line-height:40px}",""]),t.exports=e},e5ce:function(t,e,n){"use strict";n.r(e);var a=n("89de"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},f94d:function(t,e,n){"use strict";n.r(e);var a=n("13d0"),i=n("e5ce");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("6fd6");var c,s=n("f0c5"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"29c91a66",null,!1,a["a"],c);e["default"]=r.exports}}]);